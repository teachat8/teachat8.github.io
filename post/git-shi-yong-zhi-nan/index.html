<html>
<head>
  <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<title>Git实用指南 | Teachat&#39;s Blog | Share with you IT technology, to achieve progress together.</title>
<link rel="shortcut icon" href="https://teachat8.github.io/favicon.ico?v=1556262239586">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
<link rel="stylesheet" href="https://teachat8.github.io/styles/main.css" type='text/css' media='all'>

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>




</head>
<body class="home blog ct-body standard">
<div id="overflow-container" class="overflow-container">
  <a class="skip-content" href="#main">Skip to content</a>
  <header id="site-header" class="site-header" role="banner">
    <div class='top-navigation top-navigation-important'>
        <div class='container'>
            <div id="menu-secondary" class="menu-container menu-secondary" role="navigation">
                <button id="toggle-secondary-navigation" class="toggle-secondary-navigation"><i class="fa fa-plus"></i></button>
                <div class="menu">
                    <ul id="menu-secondary-items" class="menu-secondary-items">
                        
                        
                            
                        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
                            <a href="https://teachat8.github.io/tag/46EOogDrE">Git</a>
                        </li>
                            
                        
                            
                        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
                            <a href="https://teachat8.github.io/tag/pm0FyUMhZ">Mac</a>
                        </li>
                            
                        
                            
                        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
                            <a href="https://teachat8.github.io/tag/GK-hNeLqF">响应式</a>
                        </li>
                            
                        
                            
                        <li id="menu-item" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item">
                            <a href="https://teachat8.github.io/tag/OjU8kekth">Markdown</a>
                        </li>
                            
                        
                    </ul>
                </div>
            </div>
            <ul class="social-media-icons">
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </div>
    </div>

    <div class="container">
        <div id="title-info" class="title-info">
            <div id='site-title' class='site-title'>
                <a href="/https://teachat8.github.io">  Teachat&#39;s Blog | Share with you IT technology, to achieve progress together. </a>
            </div>
        </div>
        <button id="toggle-navigation" class="toggle-navigation">
            <i class="fa fa-bars"></i>
        </button>
        <div id="menu-primary-tracks" class="menu-primary-tracks"></div>
        <div id="menu-primary" class="menu-container menu-primary" role="navigation">
            <p class="site-description">记录博主学习和成长的一个博客,关注于Web前后端的学习研究."</p>
            <div class="menu">
                <ul id="menu-primary-items" class="menu-primary-items">
                     
                        
                            <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page current-menu-item current_page_item'>
                                <a href="/">首页</a>
                            </li>
                        
                    
                        
                            <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page current-menu-item current_page_item'>
                                <a href="/archives">归档</a>
                            </li>
                        
                    
                        
                            <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page current-menu-item current_page_item'>
                                <a href="/tags">标签</a>
                            </li>
                        
                    
                        
                            <li id="menu-item" class='menu-item menu-item-type-post_type menu-item-object-page current-menu-item current_page_item'>
                                <a href="/post/about">关于</a>
                            </li>
                        
                    
                </ul>
            </div>
        </div>
    </div>


</header>

  <div id="main" class="main" role="main">
    <div id="loop-container" class="loop-container">
      <div class="post type-post status-publish format-standard has-post-thumbnail hentry category-design tag-design tag-standard-2 tag-tagalicious tag-travel entry full-without-featured odd excerpt-1">
        
          <div class='featured-image lazy lazy-bg-image' data-background="https://i.loli.net/2019/04/26/5cc2acc8f2a87.jpg">
          </div>
        

        <div class="entry-meta">
          <span class="date">· 2019-04-26 ·</span> <span> / </span>
          <span class="author">
            <a href="https://teachat8.github.io" title="" rel="author"> </a>
          </span>
          
            <span class="category">
                    <span> / </span>
                    <a href="https://teachat8.github.io/tag/46EOogDrE">Git</a>
                </span>
          
        </div>
        <div class='entry-header'>
          <h1 class='entry-title'>Git实用指南</h1>
        </div>
        <div class="entry-container">
          <div class="entry-content">
            <article>
              <h2 id="1-什么是git">1. 什么是Git</h2>
<p>Git是一个开源的分布式版本控制系统，可以有效、高速地处理从很小到非常大的项目版本管理。</p>
<h2 id="2-git命令">2. Git命令</h2>
<h3 id="git-init">git init</h3>
<p>代表初始化git仓库</p>
<h3 id="git-status">git status</h3>
<p>查看git状态</p>
<h3 id="git-add">git add</h3>
<p>把改动添加到一个暂存区</p>
<h3 id="git-commit">git commit</h3>
<p>git commit -m 提交信息</p>
<h3 id="git-pull">git pull</h3>
<p>git pull origin master   把本远程 master 分支最新的代码更新到本地。一般我们在push之前都会先pull，这样不容易冲突。</p>
<h3 id="git-push">git push</h3>
<p>git push origin develop 把本地代码推送到远程 develop 分支
git push origin master   把本地代码推送到远程 master 分支</p>
<h3 id="git-log">git log</h3>
<p>查看所有产生的commit记录</p>
<h3 id="git-branch">git branch</h3>
<p>git branch 查看本地分支列表。git branch -r 查看远程分支列表。git branch -a 查看所有分支列表包括本地和远程分支</p>
<h3 id="git-branch-d">git branch -d</h3>
<p>git branch -d develop 删除本地develop分支</p>
<h3 id="git-branch-d-2">git branch -D</h3>
<p>如果a分支代码没合并到master，执行git branch -d a是删不了的，它会提示你a分支还有未合并的代码。
如果你非要非要删除，那就执行 git branch -D develop 就可以强制删除本地develop分支</p>
<h3 id="git-push-origin-develop">git push origin :develop</h3>
<p>删除远程develop 分支</p>
<h3 id="git-checkout-develop-origindevelop">git checkout develop origin/develop</h3>
<p>如果远程分支有个develop，而本地没有，执行它把远程的develop分支迁到本地</p>
<h3 id="git-checkout-b-develop-origindevelop">git checkout -b develop origin/develop</h3>
<p>把远程的develop 分支迁到本地并切换到该分支</p>
<h3 id="git-checkout">git checkout</h3>
<p>git checkout develop 切换到develop 分支。 git checkout -b featureA 新建并且自动切换到 featureA 分支。</p>
<h3 id="git-merge">git merge</h3>
<p>合并分支</p>
<h3 id="git-tag">git tag</h3>
<p>git tag v1.0 新建一个v1.0的标签。 git tag 可以查看历史tag 记录</p>
<h3 id="git-clone">git clone</h3>
<p>git clone git@github.com:teachat8/test.git git-test 把test项目 clone 到了本地git-test文件夹下</p>
<h3 id="git-remote-add-origin-gitgithubcomteachat8testgit">git remote add origin git@github.com:teachat8/test.git</h3>
<p>把本地项目与 GitHub 上的 test 项目进行关联。即添加一个远程仓库，它的地址是 git@github.com:teachat8/test.git ，而 origin 是给这个项目的远程仓库起的名字。</p>
<h3 id="git-remote-v">git remote -v</h3>
<p>查看有哪些远程仓库</p>
<h2 id="3-git-进阶">3. Git 进阶</h2>
<h3 id="1-diff">1. diff</h3>
<p>diff命令算是很常用了，使用场景是我们经常在做代码改动，但是有的时候2天前的代码了，做了哪些改动都忘记了，在提交之前需要确认下，这个时候就可以用diff来查看你到底做了哪些改动。值得一提的是直接输入 git diff 只能比较当前文件和缓存区文件差异，什么是缓存区？就是你还没有执行 git add 的文件。</p>
<pre><code>git diff &lt;$id1&gt; &lt;$id2&gt;   # 比较两次提交之间的差异

git diff &lt;branch1&gt;..&lt;branch2&gt; # 在两个分支之间比较 

git diff --staged   # 比较暂存区和版本库差异
</code></pre>
<h3 id="2-checkout">2. checkout</h3>
<p>我们知道 checkout 一般用作切换分支使用，比如切换到 develop 分支，可以执行：</p>
<p><code>git checkout develop</code></p>
<p>但是 checkout 不只用作切换分支，他可以用来切换 tag，切换到某次 commit，如：</p>
<pre><code>git checkout v1.0

git checkout ffd9f2dd68f1eb21d36cee50dbdd504e95d9c8f7 

# 后面的一长串是commit_id，是每次commit的SHA1值，可以根据 git log 看到。

</code></pre>
<p>除了有“切换”的意思，checkout 还有一个撤销的作用，举个例子，假设我们在一个分支开发一个小功能，刚写完一半，这时候需求变了，而且是大变化，之前写的代码完全用不了了，好在你刚写，甚至都没有 git add 进暂存区，这个时候很简单的一个操作就直接把原文件还原：</p>
<p><code>git checkout a.md</code></p>
<p>这里稍微提下，checkout 命令只能撤销还没有 add 进暂存区的文件。</p>
<h3 id="3-stash">3. stash</h3>
<p>设想一个场景，假设我们正在一个新的分支做新的功能，这个时候突然有一个紧急的bug需要修复，而且修复完之后需要立即发布。当然你说我先把刚写的一点代码进行提交不就行了么？这样理论上当然是ok的，但是这会产品垃圾commit，原则上我们每次的commit都要有实际的意义，你的代码只是刚写了一半，还没有什么实际的意义是不建议就这样commit的，那么有没有一种比较好的办法，可以让我暂时切到别的分支，修复完bug再切回来，而且代码也能保留的呢？</p>
<p>这个时候 stash 命令就大有用处了，前提是我们的代码没有进行 commit ，哪怕你执行了 add 也没关系，我们先执行</p>
<h4 id="git-stash">git stash</h4>
<p>什么意思呢？就是把当前分支所有没有 commit 的代码先暂存起来，这个时候你再执行 git status 你会发现当前分支很干净，几乎看不到任何改动，你的代码改动也看不见了，但其实是暂存起来了。执行</p>
<h4 id="git-stash-list">git stash list</h4>
<p>你会发现此时暂存区已经有了一条记录。</p>
<p>这个时候你可以切换回其他分支，赶紧把bug修复好，然后发布。之后一切都解决了，你再切换回来继续做你之前没做完的功能，但是之前的代码怎么还原呢？</p>
<h4 id="git-stash-apply">git stash apply</h4>
<p>你会发现你之前的代码全部又回来了，就好像一切都没发生过一样，紧接着你最好需要把暂存区的这次 stash 记录删除，执行：</p>
<h4 id="git-stash-drop">git stash drop</h4>
<p>就把最近一条的 stash 记录删除了，是不是很方便？其实还有更方便的，你可以使用：</p>
<h4 id="git-stash-pop">git stash pop</h4>
<p>来代替 apply 命令，pop 跟 apply 的唯一区别就是 pop 不但会帮你把代码还原，还自动帮你把这条 stash 记录删除，省的自己再 drop 一次了，虽然更方便，但是使用起来也需要更加谨慎，为了验证你可以紧接着执行 git stash list 命令来确认是不是已经没有该记录了。</p>
<p>最后还有一个命令介绍下：</p>
<h4 id="git-stash-clear">git stash clear</h4>
<p>就是清空所有暂存区的记录，drop 是只删除一条，当然后面可以跟 stash_id 参数来删除指定的某条记录，不跟参数就是删除最近的，而 clear 是清空。</p>
<h3 id="4-merge-rebase">4. merge &amp; rebase</h3>
<p>我们知道 merge 分支是合并的意思，我们在一个 featureA 分支开发完了一个功能，这个时候需要合并到主分支 master 上去，我们只需要进行如下操作：</p>
<pre><code>git checkout master
git merge featureA
</code></pre>
<p>其实 rebase 命令也是合并的意思，上面的需求我们一样可以如下操作：</p>
<pre><code>git checkout master
git rebase featureA
</code></pre>
<p>merge 的含义：从两个 commit「分叉」的位置起，把目标 commit 的内容应用到当前 commit（HEAD 所指向的 commit），并生成一个新的 commit；</p>
<p>merge 的三种特殊情况：
冲突
原因：当前分支和目标分支修改了同一部分内容，Git 无法确定应该怎样合并；
应对方法：解决冲突后手动 commit。
HEAD 领先于目标 commit：Git 什么也不做，空操作；
HEAD 落后于目标 commit：fast-forward。</p>
<p>Git 仓库回到 merge 前的状态：git merge --abort</p>
<h3 id="5-解决冲突">5. 解决冲突</h3>
<p>假设这样一个场景，A和B两位同学各自开了两个分支来开发不同的功能，大部分情况下都会尽量互不干扰的，但是有一个需求A需要改动一个基础库中的一个类的方法，不巧B这个时候由于业务需要也改动了基础库的这个方法，因为这种情况比较特殊，A和B都认为不会对别人造成影响，等两人各自把功能做完了，需要合并的到主分支 master 的时候，我们假设先合并A的分支，这个时候没问题的，之后再继续合并B的分支，这个时候想想也知道会有冲突了，因为A和B两个人同时更改了同一个地方，Git 本身他没法判断你们两个谁更改的对，但是这个时候他会智能的提示有 conflicts ，需要手动解决这个冲突之后再重新进行一次 commit 提交。</p>
<h3 id="6-查看改动内容">6. 查看改动内容</h3>
<ol>
<li>查看历史中的多个 commit：<code>git log</code>
<ul>
<li>查看详细改动： <code>git log -p</code></li>
<li>查看大致改动：<code>git log --stat</code></li>
</ul>
</li>
<li>查看具体某个 commit：<code>git show</code>
<ul>
<li>要看最新 commit ，直接输入 <code>git show</code>；要看指定 commit ，输入 <code>git show commit的引用或SHA-1</code></li>
<li>如果还要指定文件，在 git show 的最后加上文件名</li>
</ul>
<ol start="3">
<li>查看未提交的内容：<code>diff</code></li>
</ol>
<ul>
<li>查看暂存区和上一条 commit 的区别：<code>git diff --staged（或 --cached）</code></li>
<li>查看工作目录和暂存区的区别：<code>git diff 不加选项参数</code></li>
<li>查看工作目录和上一条 commit 的区别：<code>git diff HEAD</code></li>
</ul>
</li>
</ol>
<h3 id="7-提交的技巧">7. 提交的技巧</h3>
<h4 id="1-修改写错的最新commit">1. 修改写错的最新commit</h4>
<p>生成一条新的commit替换了原commit，push 之后就不能用了     <code>git commit --amend</code></p>
<h4 id="2-修改写错的倒数第二个commit">2. 修改写错的倒数第二个commit</h4>
<p>开启交互式 rebase <code>git rebase -i</code></p>
<p>当 rebase UI界面打开时, 你能做3件事:</p>
<ul>
<li>调整提交记录的顺序（默认顺序旧的 commit 会排在上面，新的commit排在下面）</li>
<li>删除你不想要的提交（通过切换 pick 的状态来完成，关闭就意味着你不想要这个提交记录）</li>
<li>把多个提交记录合并成一个</li>
</ul>
<p>每个 commit 默认的操作都是 pick （从rebase UI界面也可以看出），表示「直接应用这个 commit」。所以如果你现在直接退出编辑界面，那么结果仍然是空操作。</p>
<p>需要把它的操作指令从 pick 改成 edit 。 edit 的意思是「应用这个 commit，然后停下来等待继续修正」。</p>
<p>用 commit --amend 来把修正应用到当前最新的 commit <code>git commit --amend</code></p>
<p>继续 rebase 过程，把后面的 commit 直接应用上去    <code>git rebase --continue</code></p>
<p>在 Git 中，有两个「偏移符号」： ^ 和 ~。</p>
<p>^ 的用法：在 commit 的后面加一个或多个 ^ 号，可以把 commit 往回偏移，偏移的数量是 ^ 的数量。例如：master^ 表示 master 指向的 commit 之前的那个 commit； HEAD^^ 表示 HEAD 所指向的 commit 往前数两个 commit。</p>
<p>~ 的用法：在 commit 的后面加上 ~ 号和一个数，可以把 commit 往回偏移，偏移的数量是 ~ 号后面的数。例如：HEAD~5 表示 HEAD 指向的 commit往前数 5 个 commit。</p>
<p>git rebase -i HEAD^^^        列出最近的三条提交记录</p>
<p>git rebase -i HEAD~3        列出最近的三条提交记录</p>
<h4 id="3-撤销commit">3. 撤销commit</h4>
<p>撤销最新的提交 <code>git reset --hard</code></p>
<p>恢复到它的父 commit <code>git reset --hard HEAD^</code></p>
<p>git reset --hard HEAD~2</p>
<p>git reset --hard HEAD^^</p>
<p>reset的其他用法</p>
<p>git reset --hard：              重置位置的同时，清空工作目录和暂存区的所有内容；
git reset --soft：               重置位置的同时，保留工作目录和暂存区的内容，并把重置 HEAD 的位置所导致的新的文件差异放进暂存区。
git reset --mix（默认）： 重置位置的同时，保留工作目录的内容，把暂存区和重置 HEAD 的位置所导致的新的文件差异都放入工作目录。</p>
<h4 id="4-写错的commit被push撤销commit">4. 写错的commit被push，撤销commit</h4>
<p><code>git revert HEAD^</code></p>
<h4 id="5-找回被删除的branch">5. 找回被删除的branch</h4>
<p>reflog 是 &quot;reference log&quot; 的缩写，使用它可以查看 Git 仓库中的引用的移动记录。如果不指定引用，它会显示 HEAD 的移动记录。假如你误删了 branch1 这个 branch，那么你可以查看一下 HEAD 的移动历史：<code>git reflog</code></p>
<p>可以切换回 git commit id，然后重新创建 branch1 ：</p>
<p>git checkout c08de9a
git checkout -b branch1</p>
<p>这样，你刚删除的 branch1 就找回来了。</p>
<blockquote>
<p>注意：不再被引用直接或间接指向的 commits 会在一定时间后被 Git 回收，所以使用 reflog 来找回删除的 branch 的操作一定要及时，
不然有可能会由于 commit 被回收而再也找不回来。</p>
</blockquote>

            </article>
          </div>
          <div class='entry-meta-bottom'>
            <div class="entry-categories">
              <p>
                <span>Categories</span>
                
                  
                    
                  <a href="https://teachat8.github.io/tag/46EOogDrE" title="View all posts in Git">Git</a>
                    
                    
                    
                  <a href="https://teachat8.github.io/tag/pm0FyUMhZ" title="View all posts in Mac">Mac</a>
                    
                    
                    
                  <a href="https://teachat8.github.io/tag/GK-hNeLqF" title="View all posts in 响应式">响应式</a>
                    
                    
                    
                  <a href="https://teachat8.github.io/tag/OjU8kekth" title="View all posts in Markdown">Markdown</a>
                    
                    
                <!--<a href="/blog/categories/github" title="View all posts in Github">Github</a>
                <a href="/blog/categories/ssh" title="View all posts in SSH">SSH</a>
                <a href="/blog/categories/apidoc" title="View all posts in apidoc">apidoc</a>
                <a href="/blog/categories/code" title="View all posts in code">code</a>
                <a href="/blog/categories/markdown" title="View all posts in markdown">markdown</a>
                <a href="/blog/categories/snap" title="View all posts in snap">snap</a>
                <a href="/blog/categories/snap-store" title="View all posts in snap store">snap store</a>-->
              </p>
            </div>
            <div class="entry-tags">
              <p><span>Tags</span>
              </p>
            </div>
          </div>
          <div class="author-meta">
            <div class="author">
              <img alt='' src="https://teachat8.github.io/images/avatar.png?v=1556262239586" class='avatar avatar-72 photo' height='72' width='72'>
              <span>WRITTEN BY: &nbsp;&nbsp;&nbsp;<a href='https://teachat8.github.io'>Teachat's Blog | Share with you IT technology, to achieve progress together.</a> </span>
            </div>
            <div class="bio">
              <p>Teachat&#39;s Blog | Share with you IT technology, to achieve progress together.</p>
              
                
              
                
              
                
              
                
              
                
              
            </div>
          </div>
        </div>
          
            <nav class="navigation pagination" role="navigation">
              <h2 class="screen-reader-text">Posts navigation</h2>
              <div class="nav-links">
                <a class="next page-numbers" href="https://teachat8.github.io/post/mac-zhong-duan-oh-my-zsh-pei-zhi">下一篇->Mac终端oh-my-zsh配置</a>
              </div>
            </nav>
          
      </div>
      <section id="comments" class="comments">
        
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '769b3c0b43e7e76baa09',
    clientSecret: '8b0dee161c67ed4e6b42bce3d60ecc53cbba953f',
    repo: 'teachat8.github.io',
    owner: 'teachat8',
    admin: ['teachat8'],
    id: location.pathname,      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        
      </section>
    </div>
  </div>

  <footer id="site-footer" class="site-footer" role="contentinfo">
    <h1>
        <a href="https://teachat8.github.io"> Teachat&#39;s Blog | Share with you IT technology, to achieve progress together. </a>
    </h1>
    <p class="site-description">记录博主学习和成长的一个博客,关注于Web前后端的学习研究."</p>
    <div id="menu-footer" class="menu-container menu-footer" role="navigation">
        <div class="menu">
            <ul id="menu-footer-items" class="menu-footer-items">
            </ul>
        </div>
    </div>
    <ul class="social-media-icons">
        
            
        
            
        
            
        
            
        
            
        
    </ul>
    <div class="design-credit">
        <p></p>
    </div>
</footer>
<script>
    hljs.initHighlightingOnLoad()
</script>
<script src="https://teachat8.github.io/media/scripts/lib/jquery.min.js"></script>
<script src="https://teachat8.github.io/media/scripts/lib/jquerymigrate.js"></script>
<script src="https://teachat8.github.io/media/scripts/lib/production.min.js"></script>
</div>
</body>
</html>

